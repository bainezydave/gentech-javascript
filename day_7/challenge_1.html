<!-- /*
CHALLENGE 1: Pokemon Team Randomizer
​
1.1: Escaping Callback Hell
Modify the code provided below so that it doesn't look like "callback hell", and instead uses nice functions.
Open it in your browser & press the "Get Jokes" button to see the jokes appear in the Console log.
​
​
1.2: Nicer Formatting For Data 
The Pokemon API this code uses returns JSON. Process it and just show the Pokemon's name. 
*/ -->
<!DOCTYPE html>
<html>
<head>
    <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>
</head>
<body>
    <button id="button" onclick="getPokemon(5,data=>{console.log(data)})">Get Pokemon</button>
    <script>
        // document.querySelector("#button").addEventListener("click", () => {
        //     $.get(`https://pokeapi.co/api/v2/pokemon/${Math.floor(Math.random() * 808)}`, (poke1) => {
        //         $.get(`https://pokeapi.co/api/v2/pokemon/${Math.floor(Math.random() * 808)}`, (poke2) => {
        //             $.get(`https://pokeapi.co/api/v2/pokemon/${Math.floor(Math.random() * 808)}`, (poke3) => {
        //                 $.get(`https://pokeapi.co/api/v2/pokemon/${Math.floor(Math.random() * 808)}`, (poke4) => {
        //                     $.get(`https://pokeapi.co/api/v2/pokemon/${Math.floor(Math.random() * 808)}`, (poke5) => {
        //                         let pokeArray = [poke1, poke2, poke3, poke4, poke5];
        //                         console.log(pokeArray);
        //                     });
        //                 });
        //             });
        //         });    
        //     });
        // });


        function getPokemon(num, callback, pokeArray = []) {
            let url = `https://pokeapi.co/api/v2/pokemon/${Math.floor(Math.random() * 808)}`;

            $.get(url, (data) => 
            {
                pokeArray.push(data.name);

                if (num === pokeArray.length) 
                {
                    return callback(pokeArray);
                }

                return getPokemon(num, callback, pokeArray);
            });
        }


    </script>
</body>
</html>